{"ast":null,"code":"import _slicedToArray from\"C:\\\\myProJects\\\\Server\\\\weatherapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import{Dialog,Switch,DialogActions,Button,FormControlLabel,FormControl,DialogTitle,Typography}from\"@material-ui/core\";import{TimerOff,Timer}from\"@material-ui/icons\";import{CircleSlider}from\"react-circle-slider\";import\"./SleepTimerStyle.css\";var setSleepTimeToLocalStorage=function setSleepTimeToLocalStorage(time,alwaysOn){var sleepTimerSettings=JSON.stringify({time:time,alwaysOn:alwaysOn});localStorage.setItem(\"sleepTimerSettings\",sleepTimerSettings);};var getSleepTimeFromLocalStoarge=function getSleepTimeFromLocalStoarge(){var sleepTimerSettings=localStorage.getItem(\"sleepTimerSettings\");return JSON.parse(sleepTimerSettings);};var removeSleepTimer=function removeSleepTimer(){localStorage.removeItem(\"sleepTimerSettings\");};var timerTimeout;function SleepTimer(_ref){var player=_ref.player;var _useState=useState(20),_useState2=_slicedToArray(_useState,2),sliderValue=_useState2[0],changeSliderValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),checkbox=_useState6[0],setCheckbox=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isTimerSet=_useState8[0],setIsTimerSet=_useState8[1];var setTimer=function setTimer(time){console.log(\"timer has been set with time\",time);clearTimeout(timerTimeout);setIsTimerSet(true);timerTimeout=setTimeout(function(){player.pause();//pause after music finished\n},time*60*1000);};useEffect(function(){var sleepTimerObj=getSleepTimeFromLocalStoarge();if(sleepTimerObj){changeSliderValue(sleepTimerObj.time);setCheckbox(sleepTimerObj.alwaysOn);}//only set timer when there is no timer\nif(sleepTimerObj&&sleepTimerObj.alwaysOn){console.log(sleepTimerObj);setTimer(sleepTimerObj.time);}console.log(sleepTimerObj);},[]);var handleSetTimer=function handleSetTimer(){setSleepTimeToLocalStorage(sliderValue,checkbox);//   then also set a set timeout\n// if there is any timer already clear it\nsetOpen(false);setTimer(sliderValue);};var handleRemove=function handleRemove(){removeSleepTimer();setIsTimerSet(false);setOpen(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,isTimerSet?/*#__PURE__*/React.createElement(Timer,{color:\"primary\",onClick:function onClick(){return setOpen(true);}}):/*#__PURE__*/React.createElement(TimerOff,{color:\"primary\",onClick:function onClick(){return setOpen(true);}}),/*#__PURE__*/React.createElement(Dialog,{style:{zIndex:1400},open:open,onClose:function onClose(){return setOpen(false);},\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",color:\"primary\",align:\"center\",style:{marginTop:\"10px\"}},\"Pause Music After\"),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"textContainer\"},sliderValue,/*#__PURE__*/React.createElement(\"div\",{className:\"minute\"},\"MINUTES\")),/*#__PURE__*/React.createElement(CircleSlider,{value:sliderValue,stepSize:5,onChange:function onChange(value){return changeSliderValue(value);},size:300,max:120,gradientColorFrom:\"#ec008c\",gradientColorTo:\"#fc6767\",knobRadius:25,progressWidth:30,circleWidth:30})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(FormControlLabel,{value:\"Always On\",control:/*#__PURE__*/React.createElement(Switch,{checked:checkbox,onChange:function onChange(e){return setCheckbox(e.target.checked);},value:\"checked always on\",color:\"primary\"}),label:\"ALWAYS\",labelPlacement:\"end\",style:{color:\"#e91e63\"}}),/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:handleRemove},\"Remove\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:handleSetTimer},\"Set\"))));}export default SleepTimer;","map":{"version":3,"sources":["C:/myProJects/Server/weatherapp/src/components/player/SleepTimer.js"],"names":["React","useState","useEffect","useCallback","Dialog","Switch","DialogActions","Button","FormControlLabel","FormControl","DialogTitle","Typography","TimerOff","Timer","CircleSlider","setSleepTimeToLocalStorage","time","alwaysOn","sleepTimerSettings","JSON","stringify","localStorage","setItem","getSleepTimeFromLocalStoarge","getItem","parse","removeSleepTimer","removeItem","timerTimeout","SleepTimer","player","sliderValue","changeSliderValue","open","setOpen","checkbox","setCheckbox","isTimerSet","setIsTimerSet","setTimer","console","log","clearTimeout","setTimeout","pause","sleepTimerObj","handleSetTimer","handleRemove","zIndex","marginTop","value","e","target","checked","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Dialog,\r\n  Switch,\r\n  DialogActions,\r\n  Button,\r\n  FormControlLabel,\r\n  FormControl,\r\n  DialogTitle,\r\n  Typography\r\n} from \"@material-ui/core\";\r\nimport { TimerOff, Timer } from \"@material-ui/icons\";\r\nimport { CircleSlider } from \"react-circle-slider\";\r\n\r\nimport \"./SleepTimerStyle.css\";\r\n\r\nconst setSleepTimeToLocalStorage = (time, alwaysOn) => {\r\n  const sleepTimerSettings = JSON.stringify({ time: time, alwaysOn: alwaysOn });\r\n\r\n  localStorage.setItem(\"sleepTimerSettings\", sleepTimerSettings);\r\n};\r\n\r\nconst getSleepTimeFromLocalStoarge = () => {\r\n  const sleepTimerSettings = localStorage.getItem(\"sleepTimerSettings\");\r\n  return JSON.parse(sleepTimerSettings);\r\n};\r\n\r\nconst removeSleepTimer = () => {\r\n  localStorage.removeItem(\"sleepTimerSettings\");\r\n};\r\n\r\nlet timerTimeout;\r\n\r\nfunction SleepTimer({ player }) {\r\n  const [sliderValue, changeSliderValue] = useState(20);\r\n  const [open, setOpen] = useState(false);\r\n  const [checkbox, setCheckbox] = useState(false);\r\n  const [isTimerSet, setIsTimerSet] = useState(false);\r\n\r\n  const setTimer = time => {\r\n    console.log(\"timer has been set with time\", time);\r\n    clearTimeout(timerTimeout);\r\n    setIsTimerSet(true);\r\n    timerTimeout = setTimeout(() => {\r\n      player.pause(); //pause after music finished\r\n    }, time * 60 * 1000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const sleepTimerObj = getSleepTimeFromLocalStoarge();\r\n    if (sleepTimerObj) {\r\n      changeSliderValue(sleepTimerObj.time);\r\n      setCheckbox(sleepTimerObj.alwaysOn);\r\n    }\r\n\r\n    //only set timer when there is no timer\r\n    if (sleepTimerObj && sleepTimerObj.alwaysOn) {\r\n      console.log(sleepTimerObj);\r\n      setTimer(sleepTimerObj.time);\r\n    }\r\n    console.log(sleepTimerObj);\r\n  }, []);\r\n\r\n  const handleSetTimer = () => {\r\n    setSleepTimeToLocalStorage(sliderValue, checkbox);\r\n    //   then also set a set timeout\r\n    // if there is any timer already clear it\r\n    setOpen(false);\r\n    setTimer(sliderValue);\r\n  };\r\n\r\n  const handleRemove = () => {\r\n    removeSleepTimer();\r\n    setIsTimerSet(false);\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {isTimerSet ? (\r\n        <Timer color=\"primary\" onClick={() => setOpen(true)} />\r\n      ) : (\r\n        <TimerOff color=\"primary\" onClick={() => setOpen(true)} />\r\n      )}\r\n      <Dialog\r\n        style={{ zIndex: 1400 }}\r\n        open={open}\r\n        onClose={() => setOpen(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <Typography\r\n          variant=\"h5\"\r\n          color=\"primary\"\r\n          align=\"center\"\r\n          style={{ marginTop: \"10px\" }}\r\n        >\r\n          Pause Music After\r\n        </Typography>\r\n        <div className=\"container\">\r\n          <div className=\"textContainer\">\r\n            {sliderValue}\r\n            <div className=\"minute\">MINUTES</div>\r\n          </div>\r\n          <CircleSlider\r\n            value={sliderValue}\r\n            stepSize={5}\r\n            onChange={value => changeSliderValue(value)}\r\n            size={300}\r\n            max={120}\r\n            gradientColorFrom=\"#ec008c\"\r\n            gradientColorTo=\"#fc6767\"\r\n            knobRadius={25}\r\n            progressWidth={30}\r\n            circleWidth={30}\r\n          />\r\n        </div>\r\n\r\n        <DialogActions>\r\n          <FormControlLabel\r\n            value=\"Always On\"\r\n            control={\r\n              <Switch\r\n                checked={checkbox}\r\n                onChange={e => setCheckbox(e.target.checked)}\r\n                value=\"checked always on\"\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"ALWAYS\"\r\n            labelPlacement=\"end\"\r\n            style={{ color: \"#e91e63\" }}\r\n          />\r\n          <Button color=\"primary\" onClick={handleRemove}>\r\n            Remove\r\n          </Button>\r\n\r\n          <Button color=\"primary\" onClick={handleSetTimer}>\r\n            Set\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SleepTimer;\r\n"]},"metadata":{},"sourceType":"module"}