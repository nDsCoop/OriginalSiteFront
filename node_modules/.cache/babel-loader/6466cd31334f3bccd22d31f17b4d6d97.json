{"ast":null,"code":"var _jsxFileName = \"C:\\\\myProJects\\\\WeatherApp\\\\weatherapp\\\\src\\\\components\\\\ContentChat.js\";\nimport React, { Component } from 'react';\nimport Sidebar from './Sidebar';\nimport { MESSAGE_SENT, TYPING, COMMUNITY_CHAT, MESSAGE_RECIEVED } from '../Events';\nexport default class ContentChat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.resetChat = chat => {\n      return this.addChat(chat, true);\n    };\n\n    this.addChat = (chat, reset) => {\n      const {\n        socket\n      } = this.props;\n      const {\n        chats\n      } = this.state;\n      const newChats = reset ? [chat] : [...chats, chat];\n      this.setState({\n        chats: newChats\n      });\n      const messageEvent = `${MESSAGE_RECIEVED}-${chat - id}`;\n      const typingEvent = `${TYPING}-${chat - id}`;\n      socket.on(typingEvent);\n      socket.on(messageEvent, this.addMessageToChat(chatId));\n    };\n\n    this.addMessageToChat = chatID => {\n      return message => {\n        const {\n          chats\n        } = this.state;\n        let newChat = chats.map(chat => {\n          if (chat.id === chatId) chat.message.push(messageEvent);\n          return chat;\n        });\n        this.setState({\n          chats: newChats\n        });\n      };\n    };\n\n    this.updateTypingInChat = chatId => {};\n\n    this.sendMessage = (chatId, message) => {\n      const {\n        socket\n      } = this.props;\n      socket.emit(MESSAGE_SENT, {\n        chatId,\n        message\n      });\n    };\n\n    this.sendTyping = (chatId, isTyping) => {\n      const {\n        socket\n      } = this.props;\n      socket.emit(TYPING, {\n        chatId,\n        isTyping\n      });\n    };\n\n    this.setActiveChat = activeChat => {\n      this.setState({\n        activeChat\n      });\n    };\n\n    this.state = {\n      chats: [],\n      activeChat: null\n    };\n  }\n\n  componentDidMount() {\n    const {\n      socket\n    } = this.props;\n    socket.emit(COMMUNITY_CHAT, this.resetChat);\n  }\n\n  render() {\n    const {\n      user,\n      logout\n    } = this.props;\n    const {\n      activeChat,\n      chats\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      logout: logout,\n      chats: this.state.chats,\n      userchat: user,\n      activeChat: this.state.activeChat,\n      setActiveChat: this.setActiveChat,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/myProJects/WeatherApp/weatherapp/src/components/ContentChat.js"],"names":["React","Component","Sidebar","MESSAGE_SENT","TYPING","COMMUNITY_CHAT","MESSAGE_RECIEVED","ContentChat","constructor","props","resetChat","chat","addChat","reset","socket","chats","state","newChats","setState","messageEvent","id","typingEvent","on","addMessageToChat","chatId","chatID","message","newChat","map","push","updateTypingInChat","sendMessage","emit","sendTyping","isTyping","setActiveChat","activeChat","componentDidMount","render","user","logout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Sidebar from './Sidebar';\r\nimport { MESSAGE_SENT, TYPING, COMMUNITY_CHAT, MESSAGE_RECIEVED } from '../Events';\r\n\r\nexport default class ContentChat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            chats: [],\r\n            activeChat: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { socket } = this.props\r\n        socket.emit(COMMUNITY_CHAT, this.resetChat)\r\n    }\r\n\r\n    resetChat = (chat) => {\r\n        return this.addChat(chat, true)\r\n    }\r\n\r\n    addChat = (chat, reset) => {\r\n        const { socket } = this.props\r\n        const { chats } = this.state\r\n\r\n        const newChats = reset ? [chat] : [...chats, chat]\r\n        this.setState({chats: newChats})\r\n\r\n        const messageEvent = `${MESSAGE_RECIEVED}-${chat-id}`\r\n        const typingEvent = `${TYPING}-${chat-id}`\r\n\r\n        socket.on(typingEvent)\r\n        socket.on(messageEvent, this.addMessageToChat(chatId))\r\n    }\r\n\r\n    addMessageToChat = (chatID) => {\r\n        return message => {\r\n            const { chats } = this.state\r\n            let newChat = chats.map((chat) =>{\r\n                if(chat.id === chatId)\r\n                    chat.message.push(messageEvent)\r\n                return chat\r\n            })\r\n            this.setState({chats: newChats})\r\n        }\r\n    }\r\n\r\n    updateTypingInChat = (chatId) => {\r\n\r\n    }\r\n\r\n    sendMessage = (chatId, message) => {\r\n        const { socket } = this.props\r\n        socket.emit(MESSAGE_SENT, {chatId, message})\r\n    }\r\n\r\n    sendTyping = (chatId, isTyping) => {\r\n        const { socket } = this.props\r\n        socket.emit(TYPING, { chatId, isTyping })\r\n    }\r\n\r\n    setActiveChat = (activeChat) => {\r\n        this.setState({activeChat})\r\n    }\r\n    render() {\r\n        const { user, logout } = this.props\r\n        const { activeChat, chats } = this.state\r\n        return (\r\n            <div className=\"app3\">\r\n                <Sidebar\r\n                logout= { logout }\r\n                chats= { this.state.chats }\r\n                userchat= { user }\r\n                activeChat= { this.state.activeChat }\r\n                setActiveChat= { this.setActiveChat }\r\n                />\r\n                <div className=\"chat\">\r\n                    {\r\n                   \r\n\r\n                         \r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}