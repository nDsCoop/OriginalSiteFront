{"ast":null,"code":"var _jsxFileName = \"C:\\\\myProJects\\\\Server\\\\weatherapp\\\\src\\\\components\\\\App3.js\";\nimport React, { Component } from 'react';\nimport defaultImg from \"../images/Logosvg3.svg\";\nimport className from 'classnames';\nimport { Link } from 'react-router-dom';\nimport { OrderedMap } from 'immutable';\nimport _ from 'lodash';\nimport { ObjectID } from \"../helpers/objectid\";\nimport { IconButton } from '@material-ui/core';\nimport { MdSettings, MdDeleteForever, MdInsertEmoticon } from 'react-icons/md';\nimport { CgSoftwareUpload } from 'react-icons/cg';\nimport moment from 'moment';\nimport { UserBar } from \"./UserBar\";\nimport Dropzone from \"react-dropzone\";\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react';\n\nrecord: false;\n\nexport default class App3 extends Component {\n  constructor(props) {\n    super(props);\n\n    this.startRecording = () => {\n      this.setState({\n        record: true\n      });\n    };\n\n    this.stopRecording = () => {\n      this.setState({\n        record: false\n      });\n    };\n\n    this.onClickOutSide = e => {\n      if (this.ref && !this.ref.contains(e.target)) {\n        // console.log(\"Here click out side login form!\");\n        this.setState({\n          showEmoji: false\n        });\n      }\n    };\n\n    this.onDrop = files => {\n      const {\n        store\n      } = this.props;\n      console.log(\"file goc: \", files);\n      let formData = new FormData();\n      formData.append(\"file\", files[0]);\n      store.upLoadfile(formData);\n      console.log(\"file format: \", formData);\n    };\n\n    this.sendTyping = () => {\n      const {\n        store\n      } = this.props;\n      const activeChannel = store.getActiveChannel();\n      this.lastUpdateTime = Date.now();\n\n      if (!this.state.isTyping) {\n        this.setState({\n          isTyping: true\n        });\n        store.addTyping(activeChannel, true);\n        this.startCheckingTyping();\n      }\n    };\n\n    this.startCheckingTyping = () => {\n      console.log(\"Typing\");\n      this.typingInterval = setInterval(() => {\n        if (Date.now() - this.lastUpdateTime > 350) {\n          this.setState({\n            isTyping: false\n          });\n          this.stopCheckingTyping();\n        }\n      }, 300);\n    };\n\n    this.stopCheckingTyping = () => {\n      const {\n        store\n      } = this.props;\n      const activeChannel = store.getActiveChannel();\n      console.log(\"Stop Typing\");\n\n      if (this.typingInterval) {\n        clearInterval(this.typingInterval);\n        store.addTyping(activeChannel, false); // console.log(this.state.isTyping);\n      }\n    };\n\n    this.renderChannelTitle = (channel = null) => {\n      const {\n        store\n      } = this.props;\n      const members = store.getMembersFromChannel(channel);\n      const names = [];\n      members.forEach(user => {\n        const name = _.get(user, 'name');\n\n        names.push(name);\n      });\n\n      let title = _.join(names, ', ');\n\n      if (!title && _.get(channel, 'isNew')) {\n        title = 'New Mss';\n      }\n\n      return /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 16\n        }\n      }, title);\n    };\n\n    this.handleOnClick = user => {\n      const {\n        store\n      } = this.props;\n\n      const userId = _.get(user, '_id');\n\n      const channelId = _.get(store.getActiveChannel(), '_id');\n\n      store.addUserToChannel(channelId, userId);\n      this.setState({\n        searchUser: ''\n      });\n    };\n\n    this._onCreateChannel = e => {\n      e.preventDefault();\n      const {\n        store\n      } = this.props;\n      const currentUser = store.getCurrentUser();\n\n      const currentUserId = _.get(currentUser, '_id');\n\n      const channelId = new ObjectID().toString();\n      const channel = {\n        _id: channelId,\n        title: \"\",\n        lastMessage: \"Let's a chat\",\n        members: new OrderedMap(),\n        messages: new OrderedMap(),\n        isNew: true,\n        userId: currentUserId,\n        created: new Date(),\n        typing: false\n      };\n      channel.members = channel.members.set(currentUserId, true);\n      store.onCreateNewChannel(channel);\n    };\n\n    this.scrollMessagesToBottom = () => {\n      if (this.messagesRef) {\n        this.messagesRef.scrollTop = this.messagesRef.scrollHeight;\n      }\n    };\n\n    this.handleSubmit = e => {\n      const {\n        newMessage\n      } = this.state;\n      const {\n        store\n      } = this.props;\n      e.preventDefault();\n\n      if (_.trim(newMessage).length) {\n        const messageId = new ObjectID().toString();\n        const channel = store.getActiveChannel();\n\n        const channelId = _.get(channel, '_id', null);\n\n        const currentUser = store.getCurrentUser();\n        const message = {\n          _id: messageId,\n          channelId: channelId,\n          body: newMessage,\n          userId: _.get(currentUser, '_id'),\n          type: \"text\",\n          me: true\n        };\n        store.addMessage(messageId, message);\n        this.setState({\n          newMessage: \"\"\n        });\n      }\n\n      this.setState({\n        newMessage: \"\",\n        showEmoji: false\n      });\n    };\n\n    this._onResi = () => {\n      this.setState({\n        height: window.innerHeight\n      });\n    };\n\n    this.state = {\n      height: window.innerHeight,\n      newMessage: '',\n      searchUser: '',\n      showSearchUser: false,\n      isTyping: false,\n      isShowGetAud: false,\n      showEmoji: false\n    };\n  }\n\n  //   onData(recordedBlob) {\n  //     console.log('chunk of real-time data is: ', recordedBlob);\n  //   }\n  onStop(recordedBlob) {\n    console.log('recordedBlob is: ', recordedBlob);\n  }\n\n  componentWillUnmount() {\n    this.stopCheckingTyping();\n  }\n\n  renderChannelAvatar(channel) {\n    const {\n      store\n    } = this.props;\n    const members = store.getMembersFromChannel(channel);\n    const maxDisplay = 4;\n    const total = members.size > maxDisplay ? maxDisplay : members.size;\n    const avatars = members.map((user, index) => {\n      return index < maxDisplay ? /*#__PURE__*/React.createElement(\"img\", {\n        key: index,\n        src: _.get(user, 'avatar'),\n        alt: _.get(user, 'name'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 42\n        }\n      }) : null;\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className('channel-avatars', `channel-avatars-${total}`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 16\n      }\n    }, avatars);\n  }\n\n  // addTestMessages = () => {\n  //     const {store} = this.props\n  //     for(let i = 0; i < 20; i++){\n  //         let isMe = false;\n  //         if(i % 2 === 0) {\n  //             isMe = true;\n  //         }\n  //         const newMsg = {\n  //             _id: `${i}`,\n  //             author: `Author: ${i}`,\n  //             body: `The body of message ${i}`,\n  //             avatar: defaultImg,\n  //             me: isMe,\n  //             timing: '0:00'\n  //         }\n  //         store.addMessage(i, newMsg);\n  //     }\n  //     for (let c = 0; c<10; c++){\n  //         const newChannel ={\n  //             _id: `${c}`,\n  //             title: `Channel title ${c}`,\n  //             lastMessage: `Hey there is.. ${c}`,\n  //             members: new OrderedMap({\n  //                 '1': true,\n  //                 '2': true,\n  //             }),\n  //             messages: new OrderedMap(),\n  //             created: new Date(),\n  //         }\n  //         const moreMsgId =`${c + 1}`;\n  //         const msgId = `${c}`;\n  //         newChannel.messages = newChannel.messages.set(msgId, true);\n  //         newChannel.messages = newChannel.messages.set(moreMsgId, true);\n  //         store.addChannel(c, newChannel);\n  //     }\n  // }\n  componentDidUpdate() {\n    this.scrollMessagesToBottom(); // console.log(\"CDidUpdate\");\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this._onResi);\n    window.addEventListener('mousedown', this.onClickOutSide); // this.addTestMessages();\n    // console.log(\"CDidMount\");\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this._onResi);\n    window.removeEventListener('mousedown', this.onClickOutSide); // console.log(\"CWillUnMount\");\n  }\n\n  render() {\n    const {\n      height,\n      newMessage,\n      isShowGetAud,\n      isTyping,\n      showEmoji\n    } = this.state;\n    const {\n      store\n    } = this.props; // const isConnected = store.isConnected();\n\n    const activeChannel = store.getActiveChannel();\n    const messages = store.getMessagesFromChannel(activeChannel);\n    const members = store.getMembersFromChannel(activeChannel);\n    const channels = store.getChannels();\n    const usersList = store.getSearchUsers();\n    const me = store.getCurrentUser();\n\n    const onEmojiClick = (event, emojiObject) => {\n      this.setState({\n        newMessage: `${emojiObject.emoji}`\n      });\n      console.log(`${emojiObject.emoji}`);\n    };\n\n    const style = {\n      height: height\n    };\n\n    const resultSearch = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 25\n        }\n      }, usersList.map((user, index) => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          onClick: () => this.handleOnClick(user),\n          key: index,\n          className: \"user\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 36\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: user.avatar,\n          alt: user.name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }\n        }, user.name));\n      })));\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: style,\n      className: \"app3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      onClick: e => this._onCreateChannel(e),\n      className: \"btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 29\n      }\n    }, \"AddNew\"))), _.get(activeChannel, 'isNew') ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 54\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"tool\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      type: \"text\",\n      value: this.state.searchUser,\n      placeholder: \"To UserName/Email\",\n      onChange: e => {\n        const searchTxt = _.get(e, 'target.value');\n\n        this.setState({\n          searchUser: searchTxt\n        }, () => {\n          store.startSearchUsers(searchTxt);\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 29\n      }\n    })), resultSearch()) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-mid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 21\n      }\n    }, this.renderChannelTitle(activeChannel)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(UserBar, {\n      store: store,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolsRight-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      style: {\n        color: \"rgba(0, 0, 0, 0.5)\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(MdSettings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 29\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chanels\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 25\n      }\n    }, channels.map((channel, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        onClick: index => {\n          store.setActiveChannelId(channel._id);\n        },\n        key: channel._id,\n        className: className('chanel', {\n          'active': _.get(activeChannel, '_id') === _.get(channel, '_id', null)\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user-img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 41\n        }\n      }, this.renderChannelAvatar(channel)), /*#__PURE__*/React.createElement(\"div\", {\n        className: className('chanel-info', {\n          'notify': _.get(channel, 'notify', null)\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 41\n        }\n      }, this.renderChannelTitle(channel)));\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolChat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Dropzone, {\n      onDrop: this.onDrop,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 29\n      }\n    }, ({\n      getRootProps,\n      getInputProps\n    }) => /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, getRootProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(CgSoftwareUpload, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 45\n      }\n    })))))), /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref => this.messagesRef = ref,\n      className: \"messages\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 25\n      }\n    }, messages.map((mess, index) => {\n      const user = _.get(mess, 'user');\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: `${mess.me ? 'message-me' : 'message'}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: _.get(user, 'avatar'),\n        alt: \"user-img\",\n        className: \"img-user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"message-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 41\n        }\n      }, `${mess.me ? 'You' : _.get(mess, 'user.name')}`, \" say: \"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"message-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 41\n        }\n      }, `${mess.body}`.substring(0, 8) === \"uploads/\" ? // this will be either video or image \n      `${mess.body}`.substring(`${mess.body}`.length - 3, `${mess.body}`.length) === 'mp3' ? /*#__PURE__*/React.createElement(\"video\", {\n        style: {\n          maxWidth: '20rem'\n        },\n        src: `http://localhost:8080/${mess.body}`,\n        alt: \"video\",\n        type: \"video/mp4\",\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 53\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          maxWidth: '20rem'\n        },\n        src: `http://localhost:8080/${mess.body}`,\n        alt: \"img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 53\n        }\n      }) : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 45\n        }\n      }, mess.body), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"timing\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 45\n        }\n      }, mess.timing))));\n    }), showEmoji ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"emoji\",\n      ref: ref => this.ref = ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 46\n      }\n    }, /*#__PURE__*/React.createElement(Picker, {\n      onEmojiClick: onEmojiClick,\n      skinTone: SKIN_TONE_MEDIUM_DARK,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 37\n      }\n    })) : null, isShowGetAud ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"getAdi\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 52\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 46\n      }\n    }, /*#__PURE__*/React.createElement(ReactMic, {\n      record: this.state.record,\n      className: \"sound-wave\",\n      onStop: this.onStop,\n      onData: this.onData,\n      strokeColor: \"#000000\",\n      backgroundColor: \"#FF4081\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.startRecording,\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 49\n      }\n    }, \"Start\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.stopRecording,\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 49\n      }\n    }, \"Stop\"))) : null), _.get(activeChannel, 'typing') && _.get(activeChannel, 'typier') !== _.get(me, '_id') ? /*#__PURE__*/React.createElement(\"div\", {\n      disabled: newMessage.length > 1,\n      className: \"typing-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 114\n      }\n    }, \"Is Typing..\") : null, members.size > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 48\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      disabled: newMessage.length < 1,\n      className: \"message-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => {\n        this.setState({\n          showEmoji: !showEmoji\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(MdInsertEmoticon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"message\",\n      ref: input => this.input = input,\n      type: \"text\",\n      className: \"form-control\",\n      value: newMessage,\n      autoComplete: 'off',\n      placeholder: \"Type something interesting\",\n      onKeyUp: e => {\n        {\n          if (e.keyCode === 13 && !e.shiftKey) {\n            this.handleSubmit(e);\n          }\n        }\n        {\n          if (e.keyCode !== 13) {\n            this.sendTyping();\n          }\n        }\n      },\n      onChange: ({\n        target\n      }) => {\n        this.setState({\n          newMessage: target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.setState({\n        isShowGetAud: !isShowGetAud\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(CgSoftwareUpload, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      disabled: newMessage.length < 1,\n      type: \"submit\",\n      className: \"send\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 33\n      }\n    }, \" Send \"))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 25\n      }\n    }, \"Members\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chanels\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 25\n      }\n    }, members.map((member, index) => {\n      const isOnline = _.get(member, 'online', false);\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"chanel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user-img-channel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: _.get(member, 'avatar'),\n        alt: \"user-img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 45\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: className('user-status', {\n          'online': isOnline\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"chanel-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 45\n        }\n      }, member.name), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 45\n        }\n      }, \"Joined: 2000 years ago\")), /*#__PURE__*/React.createElement(\"div\", {\n        onClick: () => {\n          store.removeMemberFromChannel(activeChannel, member);\n        },\n        className: \"icon-DelUser\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        style: {\n          color: \"rgb(200, 68, 20)\",\n          fontSize: \"20\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(MdDeleteForever, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 45\n        }\n      }))));\n    })))));\n  }\n\n}","map":{"version":3,"sources":["C:/myProJects/Server/weatherapp/src/components/App3.js"],"names":["React","Component","className","Link","OrderedMap","_","ObjectID","IconButton","MdSettings","MdDeleteForever","MdInsertEmoticon","CgSoftwareUpload","moment","UserBar","Dropzone","Picker","SKIN_TONE_MEDIUM_DARK","record","App3","constructor","props","startRecording","setState","stopRecording","onClickOutSide","e","ref","contains","target","showEmoji","onDrop","files","store","console","log","formData","FormData","append","upLoadfile","sendTyping","activeChannel","getActiveChannel","lastUpdateTime","Date","now","state","isTyping","addTyping","startCheckingTyping","typingInterval","setInterval","stopCheckingTyping","clearInterval","renderChannelTitle","channel","members","getMembersFromChannel","names","forEach","user","name","get","push","title","join","handleOnClick","userId","channelId","addUserToChannel","searchUser","_onCreateChannel","preventDefault","currentUser","getCurrentUser","currentUserId","toString","_id","lastMessage","messages","isNew","created","typing","set","onCreateNewChannel","scrollMessagesToBottom","messagesRef","scrollTop","scrollHeight","handleSubmit","newMessage","trim","length","messageId","message","body","type","me","addMessage","_onResi","height","window","innerHeight","showSearchUser","isShowGetAud","onStop","recordedBlob","componentWillUnmount","renderChannelAvatar","maxDisplay","total","size","avatars","map","index","componentDidUpdate","componentDidMount","addEventListener","removeEventListener","render","getMessagesFromChannel","channels","getChannels","usersList","getSearchUsers","onEmojiClick","event","emojiObject","emoji","style","resultSearch","avatar","searchTxt","startSearchUsers","color","setActiveChannelId","getRootProps","getInputProps","mess","substring","maxWidth","timing","onData","input","keyCode","shiftKey","value","member","isOnline","removeMemberFromChannel","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport defaultImg from '../images/Logosvg3.svg';\r\nimport className from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { OrderedMap } from 'immutable';\r\nimport _ from 'lodash';\r\nimport {ObjectID} from \"../helpers/objectid\";\r\nimport { IconButton } from '@material-ui/core';\r\nimport { MdSettings, MdDeleteForever, MdInsertEmoticon } from 'react-icons/md';\r\nimport { CgSoftwareUpload } from 'react-icons/cg';\r\nimport moment from 'moment';\r\nimport { UserBar } from \"./UserBar\";\r\nimport Dropzone from \"react-dropzone\";\r\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react';\r\nrecord: false\r\n\r\nexport default class App3 extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            height: window.innerHeight,\r\n            newMessage: '',\r\n            searchUser: '',\r\n            showSearchUser : false,\r\n            isTyping: false,\r\n            isShowGetAud: false,\r\n            showEmoji: false,\r\n           \r\n\r\n        }\r\n\r\n    }\r\n\r\n    startRecording = () => {\r\n        this.setState({ record: true });\r\n      }\r\n    \r\n      stopRecording = () => {\r\n        this.setState({ record: false });\r\n      }\r\n    \r\n    //   onData(recordedBlob) {\r\n    //     console.log('chunk of real-time data is: ', recordedBlob);\r\n    //   }\r\n    \r\n      onStop(recordedBlob) {\r\n        console.log('recordedBlob is: ', recordedBlob);\r\n      }\r\n\r\n    onClickOutSide = (e) => {\r\n        if(this.ref && !this.ref.contains(e.target)){\r\n            // console.log(\"Here click out side login form!\");\r\n            this.setState({\r\n                showEmoji: false,\r\n            })\r\n        }\r\n    }\r\n\r\n        onDrop = (files) => {\r\n            const {store} = this.props;\r\n            console.log(\"file goc: \",files);\r\n            let formData = new FormData;\r\n            formData.append(\"file\", files[0]);\r\n            store.upLoadfile(formData);\r\n            console.log(\"file format: \",formData);\r\n        }\r\n\r\n\r\n        componentWillUnmount() {\r\n            this.stopCheckingTyping()\r\n        }\r\n\r\n        sendTyping = () =>{\r\n            const { store } = this.props;\r\n            const activeChannel = store.getActiveChannel();\r\n            this.lastUpdateTime = Date.now()\r\n            if(!this.state.isTyping){\r\n                this.setState({isTyping:true});\r\n                store.addTyping(activeChannel, true);\r\n                this.startCheckingTyping();\r\n\r\n            }\r\n        }\r\n\r\n\t/*\r\n\t*\tstartCheckingTyping\r\n\t*\tStart an interval that checks if the user is typing.\r\n\t*/\r\n        startCheckingTyping = ()=>{\r\n            console.log(\"Typing\");\r\n            this.typingInterval = setInterval(()=>{\r\n                if((Date.now() - this.lastUpdateTime) > 350){\r\n                    this.setState({isTyping:false})\r\n                    this.stopCheckingTyping()\r\n                }\r\n            }, 300)\r\n        }\r\n\t/*\r\n\t*\tstopCheckingTyping\r\n\t*\tStart the interval from checking if the user is typing.\r\n\t*/\r\n        stopCheckingTyping = ()=>{\r\n            const { store } = this.props;\r\n            const activeChannel = store.getActiveChannel();\r\n            console.log(\"Stop Typing\");\r\n            if(this.typingInterval){\r\n                clearInterval(this.typingInterval)\r\n                store.addTyping(activeChannel, false);\r\n            // console.log(this.state.isTyping);\r\n            }\r\n        }\r\n\r\n\r\n    renderChannelAvatar(channel){\r\n        const {store} = this.props;\r\n\r\n        const members = store.getMembersFromChannel(channel);\r\n\r\n        const maxDisplay = 4;\r\n        const total = members.size > maxDisplay ? maxDisplay : members.size;\r\n\r\n        const avatars = members.map((user, index) => {\r\n\r\n\r\n\r\n            return index < maxDisplay ?  <img key={index} src={_.get(user, 'avatar')} alt={_.get(user, 'name')} /> : null\r\n\r\n        });\r\n\r\n\r\n        return <div className={className('channel-avatars', `channel-avatars-${total}`)}>{avatars}</div>\r\n    }\r\n    renderChannelTitle = (channel = null) => {\r\n        const { store } = this.props;\r\n        const members = store.getMembersFromChannel(channel);\r\n         const names = [];\r\n\r\n         members.forEach((user) => {\r\n             const name = _.get(user, 'name')\r\n             names.push(name);\r\n         });\r\n         let title = _.join(names, ', ');\r\n         if(!title && _.get(channel, 'isNew')){\r\n             title = 'New Mss';\r\n         }\r\n        return <h4>{title}</h4>\r\n    }\r\n   \r\n    handleOnClick = (user) => {\r\n       \r\n        const { store } =this.props;\r\n        const userId = _.get(user, '_id');\r\n        const channelId = _.get( store.getActiveChannel(),'_id')\r\n        store.addUserToChannel(channelId, userId);\r\n        this.setState({\r\n            searchUser: '',\r\n        })\r\n    }\r\n    _onCreateChannel = (e) => {\r\n        e.preventDefault()\r\n        const { store } =this.props;\r\n        const currentUser = store.getCurrentUser();\r\n        const currentUserId = _.get(currentUser, '_id');\r\n        const channelId = new ObjectID().toString();\r\n        const channel = {\r\n            _id: channelId,\r\n            title: \"\",\r\n            lastMessage: \"Let's a chat\",\r\n            members: new OrderedMap(),\r\n            messages: new OrderedMap(),\r\n            isNew: true,\r\n            userId: currentUserId,\r\n            created: new Date(),\r\n            typing: false,\r\n        };\r\n        channel.members = channel.members.set(currentUserId, true);\r\n        store.onCreateNewChannel(channel);\r\n    }\r\n    scrollMessagesToBottom = () => {\r\n        if(this.messagesRef){\r\n            this.messagesRef.scrollTop = this.messagesRef.scrollHeight;\r\n        }\r\n    }\r\n    // renderMessage(message){\r\n    //     const txt = _.get(message, 'body' , '');\r\n    //     const html = _.split(txt, '\\n').map((m, key) => {\r\n    //         return <p key={key} dangerouslySetInnerHTML={{ __html: m }}></p>\r\n    //     })\r\n\r\n    //         message.substring(0, 8) === \"uploads/\" ?\r\n    //             // this will be either video or image \r\n\r\n    //             message.substring(message.length - 3, message.length) === 'mp4' ?\r\n    //                 <video\r\n    //                     style={{ maxWidth: '200px' }}\r\n    //                     src={`http://localhost:3000/${message.body}`} alt=\"video\"\r\n    //                     type=\"video/mp4\" controls\r\n    //                 />\r\n    //                 :\r\n    //                 <img\r\n    //                     style={{ maxWidth: '200px' }}\r\n    //                     src={`http://localhost:5000/${message.body}`}\r\n    //                     alt=\"img\"\r\n    //                 />\r\n    //         :\r\n    //         <p>\r\n    //             {message.body}\r\n    //         </p>\r\n\r\n        \r\n        \r\n    //     return html;\r\n    // }\r\n    handleSubmit = (e) => {\r\n\r\n        const { newMessage } = this.state;\r\n        const { store } = this.props;\r\n        e.preventDefault();\r\n\r\n        if(_.trim(newMessage).length){\r\n            const messageId = new ObjectID().toString();\r\n            const channel = store.getActiveChannel();\r\n            const channelId = _.get(channel , '_id', null);\r\n            const currentUser = store.getCurrentUser();\r\n            const message = {\r\n                _id: messageId,\r\n                channelId: channelId,\r\n                body : newMessage,\r\n                userId: _.get(currentUser, '_id'),\r\n                type:\"text\",\r\n                me: true,\r\n            };\r\n            \r\n            store.addMessage(messageId, message);\r\n            this.setState({newMessage: \"\"});\r\n        }\r\n        this.setState({\r\n            newMessage: \"\",\r\n            showEmoji: false\r\n        });\r\n\r\n    };\r\n    _onResi = () => {\r\n        this.setState({height: window.innerHeight});\r\n    }\r\n    // addTestMessages = () => {\r\n    //     const {store} = this.props\r\n\r\n      \r\n    //     for(let i = 0; i < 20; i++){\r\n    //         let isMe = false;\r\n    //         if(i % 2 === 0) {\r\n    //             isMe = true;\r\n    //         }\r\n    //         const newMsg = {\r\n    //             _id: `${i}`,\r\n    //             author: `Author: ${i}`,\r\n    //             body: `The body of message ${i}`,\r\n    //             avatar: defaultImg,\r\n    //             me: isMe,\r\n    //             timing: '0:00'\r\n    //         }\r\n    //         store.addMessage(i, newMsg);\r\n\r\n    //     }\r\n\r\n    //     for (let c = 0; c<10; c++){\r\n    //         const newChannel ={\r\n    //             _id: `${c}`,\r\n    //             title: `Channel title ${c}`,\r\n    //             lastMessage: `Hey there is.. ${c}`,\r\n    //             members: new OrderedMap({\r\n    //                 '1': true,\r\n    //                 '2': true,\r\n    //             }),\r\n    //             messages: new OrderedMap(),\r\n    //             created: new Date(),\r\n    //         }\r\n    //         const moreMsgId =`${c + 1}`;\r\n    //         const msgId = `${c}`;\r\n    //         newChannel.messages = newChannel.messages.set(msgId, true);\r\n    //         newChannel.messages = newChannel.messages.set(moreMsgId, true);\r\n    //         store.addChannel(c, newChannel);\r\n    //     }\r\n\r\n    // }\r\n    componentDidUpdate(){\r\n        this.scrollMessagesToBottom();\r\n        // console.log(\"CDidUpdate\");\r\n       \r\n    }\r\n    componentDidMount(){\r\n        window.addEventListener('resize', this._onResi);\r\n        window.addEventListener('mousedown', this.onClickOutSide);\r\n        // this.addTestMessages();\r\n        // console.log(\"CDidMount\");\r\n    }\r\n    componentWillUnmount(){\r\n        window.removeEventListener('resize', this._onResi);\r\n        window.removeEventListener('mousedown', this.onClickOutSide);\r\n        // console.log(\"CWillUnMount\");\r\n    }\r\n    \r\n    render() {\r\n\r\n        const { height, newMessage, isShowGetAud, isTyping, showEmoji} = this.state;\r\n        const { store } = this.props;\r\n        // const isConnected = store.isConnected();\r\n        const activeChannel = store.getActiveChannel();\r\n        const messages = store.getMessagesFromChannel(activeChannel);\r\n        const members = store.getMembersFromChannel(activeChannel);\r\n        const channels = store.getChannels();\r\n        const usersList = store.getSearchUsers();\r\n        const me = store.getCurrentUser();\r\n\r\n        const onEmojiClick = (event, emojiObject) => {\r\n            this.setState({newMessage:`${emojiObject.emoji}`});\r\n            console.log(`${emojiObject.emoji}`);\r\n        }\r\n\r\n        \r\n        const style = {\r\n            height: height,\r\n        }\r\n        const resultSearch = () => {\r\n\r\n                return (\r\n                    <div className=\"search-user\">\r\n                        <div className=\"user-list\">\r\n                        {usersList.map((user, index) =>{\r\n                            return <div onClick={() => this.handleOnClick(user)} key={index} className=\"user\">\r\n                            <img src={user.avatar} alt={user.name} />\r\n                            <span>{user.name}</span>\r\n                        </div>\r\n                        })\r\n                        } \r\n                        </div>\r\n                    </div>\r\n                )\r\n        }\r\n        return (\r\n            <div style={style} className=\"app3\">\r\n               <div className=\"chat-header\">\r\n                    <div className=\"header-left\">\r\n                        <div className=\"action\">\r\n                            <Link onClick={(e) => this._onCreateChannel(e)} className=\"btn-primary\">AddNew</Link>\r\n                        </div>\r\n                    </div>\r\n                    {_.get(activeChannel, 'isNew') ? <div className=\"toolbar\">\r\n                        <form className=\"tool\">\r\n                            <textarea\r\n                            type=\"text\"\r\n                            value ={ this.state.searchUser }\r\n                            placeholder=\"To UserName/Email\"\r\n                            onChange = {(e) => {\r\n                                const searchTxt = _.get(e, 'target.value');\r\n                                this.setState({\r\n                                    searchUser: searchTxt,\r\n                                }, () => {\r\n                                    store.startSearchUsers(searchTxt);\r\n                                })\r\n                                \r\n                            }}\r\n                            />\r\n                        </form>\r\n                        {resultSearch()}\r\n                        </div> : null }\r\n\r\n                    <div className=\"header-mid\">\r\n                        { this.renderChannelTitle(activeChannel) }\r\n                    </div>\r\n                    <div className=\"header-right\">\r\n                        <UserBar store = { store } />\r\n                        <div className=\"toolsRight-bar\">\r\n                        <IconButton  style={{ color: \"rgba(0, 0, 0, 0.5)\"}}>\r\n                            <MdSettings />\r\n                        </IconButton>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"chat-main\">\r\n                    <div className=\"sidebar-left\">\r\n                        <div className=\"chanels\">\r\n                            {channels.map((channel, index) =>{\r\n                                return (\r\n                                    <div onClick= {(index) => {\r\n                                        store.setActiveChannelId(channel._id);\r\n                                    }} key={channel._id} className={className('chanel', {'active' : _.get(activeChannel, '_id') === _.get(channel, '_id', null)})}>\r\n                                        <div className=\"user-img\">\r\n                                            {this.renderChannelAvatar(channel)}\r\n                                        </div>\r\n                                        <div className={className('chanel-info',{'notify': _.get(channel, 'notify', null)})}>\r\n                                            {this.renderChannelTitle(channel)}\r\n                                            {/* <p>{channel.lastMessage}</p> */}\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            \r\n                        </div>\r\n                    </div>\r\n                    <div className=\"chat-content\">\r\n                        <div className=\"toolChat\">\r\n                            <Dropzone onDrop={this.onDrop}>\r\n                                {({getRootProps, getInputProps}) => (\r\n                                    <section>\r\n                                    <div {...getRootProps()}>\r\n                                        <input {...getInputProps()} />\r\n                                        <IconButton>\r\n                                            <CgSoftwareUpload />\r\n                                        </IconButton>\r\n                                    </div>\r\n                                    </section>\r\n                                )}\r\n                            </Dropzone>\r\n                        </div>\r\n                        <div ref={(ref) => this.messagesRef = ref} className=\"messages\">\r\n                            { \r\n                                messages.map((mess, index) => { \r\n                                    const user = _.get(mess, 'user');\r\n                                    return (\r\n                                    <div key={index} className={`${mess.me ? 'message-me' : 'message'}`}>\r\n\r\n                                    <img src={_.get(user, 'avatar')} alt=\"user-img\" className=\"img-user\"></img>\r\n\r\n                                    <div className=\"message-body\">\r\n\r\n                                        <div className=\"username\">{`${mess.me ? 'You' : _.get(mess, 'user.name')}`} say: </div>\r\n                                        \r\n                                        <p className=\"message-text\">\r\n                                                { `${mess.body}`.substring(0, 8) === \"uploads/\" ?\r\n                                                // this will be either video or image \r\n\r\n                                                (`${mess.body}`).substring((`${mess.body}`).length - 3, (`${mess.body}`).length) === 'mp3' ? \r\n                                                    <video\r\n                                                        style={{ maxWidth: '20rem' }}\r\n                                                        src={`http://localhost:8080/${mess.body}`} alt=\"video\"\r\n                                                        type=\"video/mp4\" controls\r\n                                                    />\r\n                                                    :\r\n                                                    <img\r\n                                                        style={{ maxWidth: '20rem' }}\r\n                                                        src={`http://localhost:8080/${mess.body}`}\r\n                                                        alt=\"img\"\r\n                                                    />\r\n                                            :\r\n                                            <p>{mess.body}</p>\r\n                                            } \r\n                                            {/* { this.renderMessage(mess) } */}\r\n                                            <p className=\"timing\">{mess.timing}</p>\r\n\r\n                                        </p>\r\n                                    </div>\r\n                                    </div>\r\n                                    );\r\n                                   \r\n                                })\r\n                            }\r\n                                {showEmoji ? <div className=\"emoji\" ref = {(ref) => this.ref = ref}>\r\n                                    <Picker  onEmojiClick={onEmojiClick} skinTone={SKIN_TONE_MEDIUM_DARK}/>\r\n                                </div> : null }\r\n                                {\r\n                                    isShowGetAud ? <div className=\"getAdi\">\r\n                                             <div>\r\n                                                <ReactMic\r\n                                                record={this.state.record}\r\n                                                className=\"sound-wave\"\r\n                                                onStop={this.onStop}\r\n                                                onData={this.onData}\r\n                                                strokeColor=\"#000000\"\r\n                                                backgroundColor=\"#FF4081\" />\r\n                                                <button onClick={this.startRecording} type=\"button\">Start</button>\r\n                                                <button onClick={this.stopRecording} type=\"button\">Stop</button>\r\n                                            </div>\r\n                                    </div> : null\r\n                                }\r\n                                \r\n                        </div>\r\n                        \r\n                        {_.get(activeChannel, 'typing') && _.get(activeChannel, 'typier') !== _.get(me, '_id') ? <div  disabled = { newMessage.length > 1 } className=\"typing-status\">Is Typing..</div> : null}\r\n                        {   members.size > 0 ? <div className=\"message-input\">\r\n                            <form \r\n                                onSubmit= { this.handleSubmit }\r\n                                disabled = { newMessage.length < 1 }\r\n                                className=\"message-form\">\r\n                                <IconButton onClick = {() => {this.setState({showEmoji: !showEmoji})}}>\r\n                                    <MdInsertEmoticon />\r\n                                </IconButton>\r\n                                <textarea  \r\n                                    id = \"message\"\r\n                                    ref={(input)=> this.input = input}\r\n                                    type = \"text\"\r\n                                    className = \"form-control\"\r\n                                    value = { newMessage }\r\n                                    autoComplete = {'off'}\r\n                                    placeholder = \"Type something interesting\"\r\n                                    onKeyUp = { (e) => { \r\n                                        { if(e.keyCode === 13 && !e.shiftKey) \r\n                                            { this.handleSubmit(e); }}\r\n                                        { if( e.keyCode !== 13 ){ this.sendTyping() }}\r\n                                        }\r\n                                    }\r\n                                    onChange = {\r\n                                    \t({target})=>{\r\n                                    \t\tthis.setState({newMessage:target.value})\r\n                                    \t}\r\n                                    }\r\n                                    />\r\n\r\n                                <IconButton onClick = {this.setState({isShowGetAud: !isShowGetAud})} >\r\n                                <CgSoftwareUpload />\r\n                                </IconButton>\r\n                               \r\n                            \r\n                                <button\r\n                                    disabled = { newMessage.length < 1 }\r\n                                    type = \"submit\"\r\n                                    className = \"send\"\r\n                                    onClick = { this.handleSubmit }\r\n                                > Send </button>\r\n                            </form>\r\n\t\t\t                </div>\r\n                            :\r\n                            null\r\n                        }\r\n                    </div>\r\n                   \r\n                    <div className=\"sidebar-right\">\r\n                        <div className=\"title-right\">Members</div>\r\n                        <div className=\"chanels\">\r\n                            { members.map((member, index) => {\r\n\r\n                                const isOnline = _.get(member, 'online', false);\r\n                                return (\r\n                                    <div key ={ index } className=\"chanel\">\r\n\r\n                                        <div className=\"user-img-channel\">\r\n                                            <img src={_.get(member, 'avatar')} alt=\"user-img\" />\r\n                                            <span className={className('user-status', {'online': isOnline})}></span>\r\n                                        </div>\r\n                                        <div className=\"chanel-info\">\r\n                                            <h4>{ member.name }</h4>\r\n                                            <p>Joined: 2000 years ago</p>\r\n                                        </div>\r\n                                        <div onClick = {() => {\r\n                                            store.removeMemberFromChannel(activeChannel, member);\r\n                                        }}\r\n                                         className=\"icon-DelUser\">\r\n                                        <IconButton  style={{ color: \"rgb(200, 68, 20)\", fontSize: \"20\"}}>\r\n                                            <MdDeleteForever />\r\n                                        </IconButton>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            \r\n                        </div>\r\n                        \r\n                    </div>\r\n\r\n                </div>  \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}