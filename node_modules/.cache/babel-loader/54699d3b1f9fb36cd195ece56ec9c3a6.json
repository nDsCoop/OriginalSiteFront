{"ast":null,"code":"var _jsxFileName = \"C:\\\\myProJects\\\\Server\\\\weatherapp\\\\src\\\\components\\\\MainVideo.js\";\nimport React, { Component } from 'react';\nexport class MainVideo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.createOffer = () => {\n      console.log(\"Offer\");\n      this.pc.createOffer({\n        offerToReceiveVideo: 1\n      }).then(sdp => {\n        console.log(JSON.stringify(sdp));\n        this.pc.setLocalDescription(sdp);\n      }, e => {});\n    };\n\n    this.setRemoteDescription = () => {\n      const desc = JSON.parse(this.textref.value);\n      this.pc.setRemoteDescription(new RTCSessionDescription(desc));\n    };\n\n    this.createAnswer = () => {\n      console.log('Answer');\n      this.pc.createAnswer({\n        offerToReceiveVideo: 1\n      }).then(sdp => {\n        console.log(JSON.stringify(sdp));\n        this.pc.setLocalDescription(sdp);\n      }, e => {});\n    };\n\n    this.addCandidate = () => {\n      const candidate = JSON.parse(this.textref.value);\n      console.log('Adding cadidata: ', candidate);\n      this.pc.addIceCandidate(new RTCIceCandidate(candidate));\n    };\n\n    this.localVideoref = React.createRef();\n    this.remoteVideoref = React.createRef();\n  }\n\n  componentDidMount() {\n    const pc_config = null;\n    this.pc = new RTCPeerConnection(pc_config);\n\n    this.pc.onicecandidate = e => {\n      if (e.candidate) console.log(JSON.stringify(e.candidate));\n    };\n\n    this.pc.oniceconnectionstatechange = e => {\n      console.log(e);\n    };\n\n    this.pc.onaddstream = e => {\n      this.remoteVideoref.current.srcObject = e.stream;\n    };\n\n    const constraints = {\n      video: true\n    };\n\n    const success = stream => {\n      window.localStream = stream;\n      this.localVideoref.current.srcObject = stream;\n      this.pc.onaddstream(stream);\n    };\n\n    const failure = e => {//\n    };\n\n    navigator.mediaDevices.getUserMedia(constraints).then(success).catch(failure);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      ref: this.localVideoref,\n      style: {\n        width: 240,\n        height: 240,\n        margin: 5,\n        backgroundColor: 'black'\n      },\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"video\", {\n      ref: this.remoteVideoref,\n      style: {\n        width: 240,\n        height: 240,\n        margin: 5,\n        backgroundColor: 'black'\n      },\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.createOffer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Offer\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.createAnswer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"Answer\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"textarea\", {\n      style: {\n        height: '2rem',\n        width: '23rem'\n      },\n      ref: ref => {\n        this.textref = ref;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.setRemoteDescription,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"Set Remoete Desc\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.addCandidate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, \"Add Candidate\"));\n  }\n\n}\nexport default MainVideo;","map":{"version":3,"sources":["C:/myProJects/Server/weatherapp/src/components/MainVideo.js"],"names":["React","Component","MainVideo","constructor","props","createOffer","console","log","pc","offerToReceiveVideo","then","sdp","JSON","stringify","setLocalDescription","e","setRemoteDescription","desc","parse","textref","value","RTCSessionDescription","createAnswer","addCandidate","candidate","addIceCandidate","RTCIceCandidate","localVideoref","createRef","remoteVideoref","componentDidMount","pc_config","RTCPeerConnection","onicecandidate","oniceconnectionstatechange","onaddstream","current","srcObject","stream","constraints","video","success","window","localStream","failure","navigator","mediaDevices","getUserMedia","catch","render","width","height","margin","backgroundColor","ref"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nexport class MainVideo extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.localVideoref = React.createRef();\r\n        this.remoteVideoref = React.createRef();\r\n    }\r\n    componentDidMount(){\r\n        const pc_config = null;\r\n        this.pc = new RTCPeerConnection(pc_config)\r\n        this.pc.onicecandidate = (e) => {\r\n            if(e.candidate) console.log(JSON.stringify(e.candidate))\r\n        }\r\n        this.pc.oniceconnectionstatechange = (e) => {\r\n            console.log(e)\r\n        }\r\n        \r\n        this.pc.onaddstream = (e) => {\r\n            this.remoteVideoref.current.srcObject = e.stream\r\n        }\r\n        const constraints = { video: true }\r\n\r\n\r\n        const success = (stream) => {\r\n            window.localStream = stream\r\n            this.localVideoref.current.srcObject = stream\r\n            this.pc.onaddstream(stream)\r\n        }\r\n        const failure = (e) => {\r\n            //\r\n        }\r\n        navigator.mediaDevices.getUserMedia( constraints )\r\n        .then( success )\r\n        .catch( failure )\r\n    }\r\n    createOffer = () => {\r\n        console.log(\"Offer\");\r\n        this.pc.createOffer({offerToReceiveVideo: 1})\r\n        .then(sdp => {\r\n            console.log(JSON.stringify(sdp))\r\n            this.pc.setLocalDescription(sdp)\r\n        }, e => {})\r\n    }\r\n    setRemoteDescription = () => {\r\n        const desc = JSON.parse(this.textref.value)\r\n        this.pc.setRemoteDescription(new RTCSessionDescription(desc))\r\n    }\r\n    createAnswer = () => {\r\n        console.log('Answer');\r\n        this.pc.createAnswer({offerToReceiveVideo: 1})\r\n        .then(sdp => {\r\n            console.log(JSON.stringify(sdp))\r\n            this.pc.setLocalDescription(sdp)\r\n        }, e => {})\r\n    }\r\n    addCandidate = () => {\r\n        const candidate = JSON.parse(this.textref.value)\r\n        console.log('Adding cadidata: ', candidate)\r\n\r\n        this.pc.addIceCandidate(new RTCIceCandidate(candidate))\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <div>\r\n                <video ref={this.localVideoref}\r\n                style={{width: 240, height: 240, margin: 5, backgroundColor: 'black'}}\r\n                autoPlay ></video>\r\n                \r\n                <video ref={this.remoteVideoref}\r\n                style={{width: 240, height: 240, margin: 5, backgroundColor: 'black'}}\r\n                autoPlay ></video>\r\n\r\n                <button onClick={this.createOffer}>Offer</button>\r\n                <button onClick={this.createAnswer}>Answer</button>\r\n                <br/>\r\n                <textarea style={{height:'2rem', width: '23rem'}} ref={ref => { this.textref = ref}}/>\r\n                <br/>\r\n                <button onClick={this.setRemoteDescription}>Set Remoete Desc</button>\r\n                <button onClick={this.addCandidate}>Add Candidate</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default MainVideo\r\n"]},"metadata":{},"sourceType":"module"}